<?php try {             if(!include("php/polocz.php")) throw new Exception("Nie udało sie uzyskać bazy");    global $baza;    (bool)$poprawnosc = true;    if (!empty(htmlspecialchars($_POST['email'])) && !empty(htmlspecialchars($_POST['haslo']))) {        (string)$email =  mysqli_real_escape_string($baza,htmlspecialchars($_POST['email']));        (string)$haslo =  mysqli_real_escape_string($baza,htmlspecialchars($_POST['haslo']));        if($zapytanie = mysqli_query($baza, "SELECT * FROM hasla WHERE email = '$email' AND haslo = '$haslo'")) {         if (mysqli_num_rows($zapytanie) > 0) {            while ($uzytkownik = mysqli_fetch_assoc($zapytanie)) {                if ($uzytkownik['email'] == $email && $uzytkownik['haslo'] == $haslo) {                    $_SESSION['uzytkwonik_pixi_id'] = mysqli_real_escape_string($baza,htmlspecialchars($uzytkownik['id']));                    $_SESSION['ip'] = htmlspecialchars($_SERVER['REMOTE_ADDR']);                    $_SESSION['poprawnosc'] = true;                    header('Location:/');                    echo "poprawne";                }                exit();            }        } else {            $poprawnosc = false;            echo 'Nie prawidłowe dane';        }    } else  throw new Exception("Nie udało się połączyć z bazą w celu sptawdzenia użytkowanika");        } else {        $poprawnosc = false;        echo 'Brak danych';    }    $_SESSION['poprawnosc'] = $poprawnosc;    if($zapytanie) mysqli_free_result($zapytanie);    mysqli_close($baza);    header('Location:/');    exit();} catch (Exception $blod) {    if (!file_exists('bledy.txt')) {      fopen('bledy/bledy.txt','a');    }    $plik = fopen('bledy/bledy.txt','a');    fwrite($plik, 'Błąd ' . $blod);    fclose($plik);    exit();  } catch (PDOException $blod) {    if (!file_exists('bledy.txt')) {      fopen('bledy/bledy.txt','a');    }    $plik = fopen('bledy/bledy.txt','a');    fwrite($plik, 'Błąd ' . $blod);    fclose($plik);    exit();  }